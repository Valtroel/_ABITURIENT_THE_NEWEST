@startuml

title Состояние заявки

[*]         ---> Новая       : пользователь\nсоздал\nзаявку
Новая       ---> Согласуется : эксперт\nответил\nна заявку\nи\nпредложил\nвремя
Согласуется ---> Согласована : пользователь\nсогласовал\nзаявку
Согласуется ---> Новая       : пользователь\nотказался\nсогласовывать\nзаявку
Согласована ---> Выполнена   : консультация\nсостоялась
Выполнена   ---> [*]


Новая       ---> Отменена    : пользователь\nотменил\nзаявку
Согласуется ---> Отменена    : пользователь\nотменил\nзаявку
Согласована ---> Отменена    : пользователь\nотменил\nзаявку
Отменена    ---> [*]

Новая       ---> Проблемная  : [время с момента\nсоздания > недели]
Согласуется ---> Проблемная  : [прошло\nвремя\nпредложенное\nэкспертом]
Проблемная  ---> Отменена    : Заявка\nотменена\nпользователем\nили\nадминистратором
Проблемная  ---> Согласуется : Администратор\nназначил\nэксперта

@enduml